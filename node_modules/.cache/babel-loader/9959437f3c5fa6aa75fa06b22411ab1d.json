{"ast":null,"code":"var _jsxFileName = \"D:\\\\\\u6587\\u4EF6\\\\Desktop\\\\\\u524D\\u7AEF\\u671F\\u4E2D\\u4F5C\\u696D\\\\src\\\\store\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport { createContext } from \"react\";\nimport useReducerWithThunk from \"use-reducer-thunk\";\nimport products from \"../json/products.json\";\nimport { SET_PAGE_CONTENT, SET_NAVBAR_ACTIVEITEM, ADD_CART_ITEM, REMOVE_CART_ITEM, SET_PRODUCT_DETAIL } from \"../utils/constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const StoreContext = /*#__PURE__*/createContext();\nlet cartItems = localStorage.getItem(\"cartItems\") ? JSON.parse(localStorage.getItem(\"cartItems\")) : [];\nconst initialState = {\n  page: {\n    products\n  },\n  ProductNavBar: {\n    activeItem: \"/\"\n  },\n  cartItems,\n  productDetail: {\n    product: {},\n    qty: 1\n  }\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case SET_PAGE_CONTENT:\n      return { ...state,\n        page: action.payload\n      };\n\n    case SET_NAVBAR_ACTIVEITEM:\n      return { ...state,\n        ProductNavBar: {\n          activeItem: action.payload\n        }\n      };\n\n    case ADD_CART_ITEM:\n      const item = action.payload;\n      const product = state.cartItems.find(x => x.id === item.id);\n\n      if (product) {\n        cartItems = state.cartItems.map(x => x.id === product.id ? item : x);\n        return { ...state,\n          cartItems\n        };\n      }\n\n      cartItems = [...state.cartItems, item];\n      return { ...state,\n        cartItems\n      };\n\n    case REMOVE_CART_ITEM:\n      cartItems = state.cartItems.filter(x => x.id !== action.payload);\n      return { ...state,\n        cartItems\n      };\n\n    case SET_PRODUCT_DETAIL:\n      return { ...state,\n        productDetail: action.payload\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport function StoreProvider(props) {\n  _s();\n\n  const [state, dispatch] = useReducerWithThunk(reducer, initialState, \"example\");\n  const value = {\n    state,\n    dispatch\n  };\n  return /*#__PURE__*/_jsxDEV(StoreContext.Provider, {\n    value: value,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 7\n  }, this);\n}\n\n_s(StoreProvider, \"P0eKCI6WtpOvzqf1JEHAprAawWs=\", false, function () {\n  return [useReducerWithThunk];\n});\n\n_c = StoreProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"StoreProvider\");","map":{"version":3,"sources":["D:/文件/Desktop/前端期中作業/src/store/index.js"],"names":["createContext","useReducerWithThunk","products","SET_PAGE_CONTENT","SET_NAVBAR_ACTIVEITEM","ADD_CART_ITEM","REMOVE_CART_ITEM","SET_PRODUCT_DETAIL","StoreContext","cartItems","localStorage","getItem","JSON","parse","initialState","page","ProductNavBar","activeItem","productDetail","product","qty","reducer","state","action","type","payload","item","find","x","id","map","filter","StoreProvider","props","dispatch","value","children"],"mappings":";;;AAAA,SAASA,aAAT,QAA8B,OAA9B;AACA,OAAOC,mBAAP,MAAgC,mBAAhC;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,SACIC,gBADJ,EAEIC,qBAFJ,EAGIC,aAHJ,EAIIC,gBAJJ,EAKIC,kBALJ,QAMO,oBANP;;AAQA,OAAO,MAAMC,YAAY,gBAAGR,aAAa,EAAlC;AACP,IAAIS,SAAS,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,IACZC,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAX,CADY,GAEZ,EAFJ;AAIA,MAAMG,YAAY,GAAG;AACjBC,EAAAA,IAAI,EAAE;AACHb,IAAAA;AADG,GADW;AAIjBc,EAAAA,aAAa,EAAE;AACXC,IAAAA,UAAU,EAAE;AADD,GAJE;AAOjBR,EAAAA,SAPiB;AAQjBS,EAAAA,aAAa,EAAE;AACXC,IAAAA,OAAO,EAAE,EADE;AAEXC,IAAAA,GAAG,EAAE;AAFM;AARE,CAArB;;AAeC,SAASC,OAAT,CAAiBC,KAAjB,EAAwBC,MAAxB,EAAgC;AAC7B,UAAQA,MAAM,CAACC,IAAf;AACG,SAAKrB,gBAAL;AACG,aAAO,EACL,GAAGmB,KADE;AAELP,QAAAA,IAAI,EAAEQ,MAAM,CAACE;AAFR,OAAP;;AAIF,SAAKrB,qBAAL;AACI,aAAO,EACJ,GAAGkB,KADC;AAEJN,QAAAA,aAAa,EAAE;AACZC,UAAAA,UAAU,EAAEM,MAAM,CAACE;AADP;AAFX,OAAP;;AAMJ,SAAKpB,aAAL;AACI,YAAMqB,IAAI,GAAGH,MAAM,CAACE,OAApB;AACA,YAAMN,OAAO,GAAGG,KAAK,CAACb,SAAN,CAAgBkB,IAAhB,CAAsBC,CAAD,IAAOA,CAAC,CAACC,EAAF,KAASH,IAAI,CAACG,EAA1C,CAAhB;;AACA,UAAIV,OAAJ,EAAa;AACTV,QAAAA,SAAS,GAAGa,KAAK,CAACb,SAAN,CAAgBqB,GAAhB,CAAqBF,CAAD,IAC5BA,CAAC,CAACC,EAAF,KAASV,OAAO,CAACU,EAAjB,GAAsBH,IAAtB,GAA6BE,CADrB,CAAZ;AAGA,eAAO,EAAE,GAAGN,KAAL;AAAYb,UAAAA;AAAZ,SAAP;AACH;;AACDA,MAAAA,SAAS,GAAG,CAAC,GAAGa,KAAK,CAACb,SAAV,EAAqBiB,IAArB,CAAZ;AACA,aAAO,EAAE,GAAGJ,KAAL;AAAYb,QAAAA;AAAZ,OAAP;;AACJ,SAAKH,gBAAL;AACIG,MAAAA,SAAS,GAAGa,KAAK,CAACb,SAAN,CAAgBsB,MAAhB,CAAwBH,CAAD,IAAOA,CAAC,CAACC,EAAF,KAASN,MAAM,CAACE,OAA9C,CAAZ;AACA,aAAO,EAAE,GAAGH,KAAL;AAAYb,QAAAA;AAAZ,OAAP;;AACJ,SAAKF,kBAAL;AACI,aAAO,EAAE,GAAGe,KAAL;AAAYJ,QAAAA,aAAa,EAAEK,MAAM,CAACE;AAAlC,OAAP;;AACL;AACG,aAAOH,KAAP;AA9BN;AAgCF;;AAED,OAAO,SAASU,aAAT,CAAuBC,KAAvB,EAA8B;AAAA;;AAClC,QAAM,CAACX,KAAD,EAAQY,QAAR,IAAoBjC,mBAAmB,CAC3CoB,OAD2C,EAE3CP,YAF2C,EAG3C,SAH2C,CAA7C;AAKA,QAAMqB,KAAK,GAAG;AAAEb,IAAAA,KAAF;AAASY,IAAAA;AAAT,GAAd;AAEA,sBACE,QAAC,YAAD,CAAc,QAAd;AAAuB,IAAA,KAAK,EAAEC,KAA9B;AAAA,cACGF,KAAK,CAACG;AADT;AAAA;AAAA;AAAA;AAAA,UADF;AAKD;;GAbcJ,a;UACa/B,mB;;;KADb+B,a","sourcesContent":["import { createContext } from \"react\";\r\nimport useReducerWithThunk from \"use-reducer-thunk\";\r\nimport products from \"../json/products.json\"\r\nimport {\r\n    SET_PAGE_CONTENT,\r\n    SET_NAVBAR_ACTIVEITEM,\r\n    ADD_CART_ITEM,\r\n    REMOVE_CART_ITEM,\r\n    SET_PRODUCT_DETAIL\r\n} from \"../utils/constants\"\r\n\r\nexport const StoreContext = createContext();\r\nlet cartItems = localStorage.getItem(\"cartItems\")\r\n  ? JSON.parse(localStorage.getItem(\"cartItems\"))\r\n  : [];\r\n\r\nconst initialState = {\r\n    page: {\r\n       products,\r\n    },\r\n    ProductNavBar: {\r\n        activeItem: \"/\",\r\n    },\r\n    cartItems,\r\n    productDetail: {\r\n        product: {},\r\n        qty: 1,\r\n    },\r\n };\r\n\r\n\r\n function reducer(state, action) {\r\n    switch (action.type) {\r\n       case SET_PAGE_CONTENT:\r\n          return {\r\n            ...state,\r\n            page: action.payload,\r\n          };\r\n        case SET_NAVBAR_ACTIVEITEM:\r\n            return {\r\n               ...state,\r\n               ProductNavBar: {\r\n                  activeItem: action.payload\r\n               },\r\n            };\r\n        case ADD_CART_ITEM:\r\n            const item = action.payload;\r\n            const product = state.cartItems.find((x) => x.id === item.id);\r\n            if (product) {\r\n                cartItems = state.cartItems.map((x) =>\r\n                    x.id === product.id ? item : x\r\n                );\r\n                return { ...state, cartItems };\r\n            }\r\n            cartItems = [...state.cartItems, item];\r\n            return { ...state, cartItems };\r\n        case REMOVE_CART_ITEM:\r\n            cartItems = state.cartItems.filter((x) => x.id !== action.payload);\r\n            return { ...state, cartItems };\r\n        case SET_PRODUCT_DETAIL:\r\n            return { ...state, productDetail: action.payload };\r\n       default:\r\n          return state;\r\n    }\r\n }\r\n \r\n export function StoreProvider(props) {\r\n    const [state, dispatch] = useReducerWithThunk(\r\n      reducer,\r\n      initialState,\r\n      \"example\"\r\n    );\r\n    const value = { state, dispatch };\r\n  \r\n    return (\r\n      <StoreContext.Provider value={value}>\r\n        {props.children}\r\n      </StoreContext.Provider>\r\n    );\r\n  }"]},"metadata":{},"sourceType":"module"}